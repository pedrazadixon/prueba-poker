<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prueba Poker</title>
    <link
      rel="stylesheet"
      href="http:////cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css"
    />
    <script src="http:////code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="http:////cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>

    <style>
      body {
        height: 90vh;
        display: flex;
      }

      #tablaPoker {
        width: 100%;
      }

      .dataTables_wrapper {
        width: 100%;
        padding-left: 5px;
        padding-right: 5px;
      }
    </style>
  </head>
  <body>
    <textarea id="numeros_aleatorios" rows="6">
        0.546548975
        0
        0.4865315
        0.44
        0.25486
    </textarea>

    <button onclick="procesar()">run</button>
    <button onclick="procesar2()">run2</button>

    <table id="tablaPoker">
      <thead>
        <tr>
          <th>Numeros Aleatorios</th>
          <th>Procesado</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      var procesar2 = function () {
        var test = "0.33221";

        var evaluar = function (numero) {
          var valor_recortado = numero.substring(2, 7);

          var conteos = {};

          for (let i = 0; i < valor_recortado.length; i++) {
            var es_td = false;
            var es_2p = false;
            var es_1p = false;
            var es_1t = false;
            var es_1q = false; // 5 iguales
            var es_full = false; // 1 tercio + 1 par
            var es_poker = false; // 4 iguales

            const element = valor_recortado[i];

            conteos[valor_recortado[i]] =
              valor_recortado.split(valor_recortado[i]).length - 1;
          }

          console.log(conteos);

          var perrito = Object.values(conteos);

          if (perrito.includes(3) && perrito.includes(2)) {
            console.log("es_full");
          }

          if (perrito.includes(5)) {
            console.log("es_1q");
          }


        };

        evaluar(test);
      };

      var procesar = function () {
        var tableData = [];

        $("#tablaPoker").DataTable().destroy();

        var lineas = $("#numeros_aleatorios").val().split("\n");
        for (var i = 0; i < lineas.length; i++) {
          var valor = lineas[i].trim();
          if (valor !== "") {
            var valor_recortado = valor.substring(2, 7);

            if (valor_recortado.length < 5) {
              var ceros_faltantes = 5 - valor_recortado.length;
              for (let k = 1; k <= ceros_faltantes; k++) {
                valor_recortado = valor_recortado + "0";
              }
            }

            tableData.push({
              numero_aleatorio: valor,
              numero_procesado: valor_recortado,
            });
          }
        }

        $("#tablaPoker").DataTable({
          paging: false,
          bInfo: false,
          ordering: false,
          data: tableData,
          columns: [{ data: "numero_aleatorio" }, { data: "numero_procesado" }],
        });
      };
    </script>
  </body>
</html>
